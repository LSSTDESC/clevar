

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Catalog Objects &mdash; ClEvaR 0.8.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matching catalogs based on proximity (simple)" href="proximity_matching.html" />
    <link rel="prev" title="Citing ClEvaR" href="../source/citing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ClEvaR
          

          
          </a>

          
            
            
              <div class="version">
                0.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source/overview.html">Rapid overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/citing.html">Citing ClEvaR</a></li>
</ul>
<p class="caption"><span class="caption-text">Usage Demos</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Catalog Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="proximity_matching.html">Matching catalogs based on proximity (simple)</a></li>
<li class="toctree-l1"><a class="reference internal" href="proximity_matching_detailed.html">Matching catalogs based on proximity (detailed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="membership_matching.html">Matching catalogs based on membership (simple)</a></li>
<li class="toctree-l1"><a class="reference internal" href="membership_matching_detailed.html">Matching catalogs based on membership (detailed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="match_metrics.html">Metrics of matching (simple)</a></li>
<li class="toctree-l1"><a class="reference internal" href="match_metrics_advanced.html">Metrics of matching (advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="footprint.html">Footprint functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="intrinsic_completeness.html">Intrinsic Completeness</a></li>
<li class="toctree-l1"><a class="reference internal" href="intrinsic_completeness.html#appendix-estimating-deviation-in-completeness-approximation">Appendix: Estimating deviation in completeness approximation</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.catalog.html">clevar.catalog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.constants.html">clevar.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.cosmology.html">clevar.cosmology package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.cosmology.astropy.html">clevar.cosmology.astropy module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.cosmology.ccl.html">clevar.cosmology.ccl module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.cosmology.parent_class.html">clevar.cosmology.parent_class module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.footprint.html">clevar.footprint package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.footprint.artificial.html">clevar.footprint.artificial module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.footprint.footprint.html">clevar.footprint.footprint module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.footprint.nfw_funcs.html">clevar.footprint.nfw_funcs module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.geometry.html">clevar.geometry module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.match.html">clevar.match package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match.membership.html">clevar.match.membership module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match.parent.html">clevar.match.parent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match.proximity.html">clevar.match.proximity module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.match_metrics.html">clevar.match_metrics package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.distances.html">clevar.match_metrics.distances package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.distances.catalog_funcs.html">clevar.match_metrics.distances.catalog_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.distances.funcs.html">clevar.match_metrics.distances.funcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.recovery.html">clevar.match_metrics.recovery package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.recovery.array_funcs.html">clevar.match_metrics.recovery.array_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.recovery.catalog_funcs.html">clevar.match_metrics.recovery.catalog_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.recovery.funcs.html">clevar.match_metrics.recovery.funcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.scaling.html">clevar.match_metrics.scaling package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.scaling.array_funcs.html">clevar.match_metrics.scaling.array_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.scaling.catalog_funcs.html">clevar.match_metrics.scaling.catalog_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.scaling.funcs.html">clevar.match_metrics.scaling.funcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.plot_helper.html">clevar.match_metrics.plot_helper module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.utils.html">clevar.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.yaml.html">clevar.yaml package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.footprint.html">clevar.yaml.footprint module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.helper_funcs.html">clevar.yaml.helper_funcs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.match.html">clevar.yaml.match module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.match_metrics_distances.html">clevar.yaml.match_metrics_distances module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.match_metrics_mass.html">clevar.yaml.match_metrics_mass module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.match_metrics_recovery_rate.html">clevar.yaml.match_metrics_recovery_rate module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.yaml.match_metrics_redshift.html">clevar.yaml.match_metrics_redshift module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ClEvaR</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Catalog Objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/compiled-examples/catalogs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="catalog-objects">
<h1>Catalog Objects<a class="headerlink" href="#catalog-objects" title="Permalink to this headline">¶</a></h1>
<p>There are two objects for catalogs, <code class="docutils literal notranslate"><span class="pre">ClCatalogs</span></code> for clusters and
<code class="docutils literal notranslate"><span class="pre">MemCatalogs</span></code> for cluster members. Both of them have the same
properties of <code class="docutils literal notranslate"><span class="pre">astropy</span></code> tables with additional functionality.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
<div class="section" id="common-properties-of-clcatalog-and-memcatalog">
<h2>Common properties of <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> and <code class="docutils literal notranslate"><span class="pre">MemCatalog</span></code><a class="headerlink" href="#common-properties-of-clcatalog-and-memcatalog" title="Permalink to this headline">¶</a></h2>
<p>Both catalog objects have the following attributes: - <code class="docutils literal notranslate"><span class="pre">name</span></code>:
ClCatalog name - <code class="docutils literal notranslate"><span class="pre">data</span></code>: Table with main catalog data (ex: id, ra,
dec, z) and matching data (mt_self, mt_other, mt_cross, mt_multi_self,
mt_multi_other) - <code class="docutils literal notranslate"><span class="pre">mt_input</span></code>: Table containing the necessary inputs
for the match (added by Match objects) - <code class="docutils literal notranslate"><span class="pre">size</span></code>: Number of objects in
the catalog - <code class="docutils literal notranslate"><span class="pre">id_dict</span></code>: Dictionary of indicies given the object id -
<code class="docutils literal notranslate"><span class="pre">labels</span></code>: Labels of data columns for plots</p>
<div class="section" id="creating-a-catalog">
<h3>Creating a catalog<a class="headerlink" href="#creating-a-catalog" title="Permalink to this headline">¶</a></h3>
<p>To create a catalog, you have to pass the name as the initial argument
and the data for the table as keyword arguments:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">clevar</span> <span class="kn">import</span> <span class="n">ClCatalog</span><span class="p">,</span> <span class="n">MemCatalog</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">mem</span> <span class="o">=</span> <span class="n">MemCatalog</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;m1&#39;</span><span class="p">,</span> <span class="s1">&#39;m2&#39;</span><span class="p">,</span> <span class="s1">&#39;m3&#39;</span><span class="p">],</span> <span class="n">id_cluster</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">])</span>
<span class="c1"># Format for nice display</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> will always have the matching columns added, while
<code class="docutils literal notranslate"><span class="pre">MemCatalog</span></code> will add them when necessary:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">mem</span><span class="p">)</span>
</pre></div>
</div>
<b>cluster</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140304178264912" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><b>members</b><br><i>ClData length=3</i>
<table id="table140304178263856" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>id_cluster</th></tr></thead>
<thead><tr><th>str2</th><th>str2</th></tr></thead>
<tr><td>m1</td><td>c1</td></tr>
<tr><td>m2</td><td>c2</td></tr>
<tr><td>m3</td><td>c1</td></tr>
</table><div class="section" id="create-a-catalog-from-fits-files">
<h4>Create a catalog from <code class="docutils literal notranslate"><span class="pre">fits</span></code> files<a class="headerlink" href="#create-a-catalog-from-fits-files" title="Permalink to this headline">¶</a></h4>
<p>The catalogs objects can also be read directly from file, by passing the
fits file as the first argument, the catalog name as the second, and the
names of the columns in the fits files as keyword arguments:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;../demo/cat1.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;my cluster&#39;</span><span class="p">,</span>
                     <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="s1">&#39;MASS&#39;</span><span class="p">)</span>
<span class="n">mem</span> <span class="o">=</span> <span class="n">MemCatalog</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;../demo/cat1_mem.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;my cluster members&#39;</span><span class="p">,</span>
                     <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">id_cluster</span><span class="o">=</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="saving-catalogs">
<h3>Saving catalogs<a class="headerlink" href="#saving-catalogs" title="Permalink to this headline">¶</a></h3>
<p>Both Catalog objects have a <code class="docutils literal notranslate"><span class="pre">write</span></code> inbuilt function to save them to
<code class="docutils literal notranslate"><span class="pre">.fits</span></code> files. These functions also take the argument <code class="docutils literal notranslate"><span class="pre">add_header</span></code>
that add the name and labels informations to those files. If the file
was saved with this argument, it can be read without the requirement of
a <code class="docutils literal notranslate"><span class="pre">name</span></code> argument:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;cat1_with_info.fits&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat_temp</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">read_full</span><span class="p">(</span><span class="s1">&#39;cat1_with_info.fits&#39;</span><span class="p">)</span>
<span class="n">cat_temp</span>
</pre></div>
</div>
<b>my cluster</b><br>Radius unit: None<br><i>ClData length=5</i>
<table id="table140304178263808" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str3</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>CL0</td><td>31622776601683.793</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL1</td><td>25118864315095.82</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL2</td><td>19952623149688.83</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL3</td><td>63095734448019.43</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL4</td><td>100000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div>
<div class="section" id="catalog-data">
<h3>Catalog data<a class="headerlink" href="#catalog-data" title="Permalink to this headline">¶</a></h3>
<p>All catalogs have an <code class="docutils literal notranslate"><span class="pre">id</span></code> column if not included in the input, one
will be created:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140304186775440" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str1</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>0</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>1</td><td>100000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><p>Almost all keyword arguments will become columns of the catalog (see
exeptions in <cite>Properties of ``ClCatalog`</cite> &lt;#clcat&gt;`__ and <cite>Properties of
``MemCatalog`</cite> &lt;#memcat&gt;`__):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;test name&#39;</span><span class="p">,</span> <span class="n">test_column</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">other</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="n">third</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[]])</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>test name</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140301342774320" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>test_column</th><th>other</th><th>third</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str1</th><th>int64</th><th>bool</th><th>object</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>0</td><td>1</td><td>True</td><td>None</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>1</td><td>2</td><td>False</td><td>[]</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><p>The catalogs have a <code class="docutils literal notranslate"><span class="pre">label</span></code> attibute that is used for plots. If it is
not provided as argument, a default value is assigned:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="o">.</span><span class="n">labels</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;id_</span><span class="si">{cluster}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="s1">&#39;mass_</span><span class="si">{cluster}</span><span class="s1">&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;cluster ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;cluster M_200&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="o">.</span><span class="n">labels</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;cluster ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="s1">&#39;cluster M_200&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The main data table of the catalog can be accessed with <code class="docutils literal notranslate"><span class="pre">[]</span></code>
operations in the same way as <code class="docutils literal notranslate"><span class="pre">astropy</span></code> tables. The output is a new
<code class="docutils literal notranslate"><span class="pre">Catalog</span></code> object, exept when only 1 row or column is required:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</pre></div>
</div>
&lt;Column name=&apos;id&apos; dtype=&apos;str2&apos; length=2&gt;
<table>
<tr><td>c1</td></tr>
<tr><td>c2</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</pre></div>
</div>
&lt;Column name=&apos;id&apos; dtype=&apos;str2&apos; length=2&gt;
<table>
<tr><td>c1</td></tr>
<tr><td>c2</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">]</span>
</pre></div>
</div>
<b>cluster</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140301342776912" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>100000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
<b>cluster</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140301342774128" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c2</td><td>100000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c1</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<b>cluster</b><br>Radius unit: None<br><i>ClData length=1</i>
<table id="table140301342776624" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<i>Row index=0</i>
<table id="table140301342773312">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div>
<div class="section" id="inbuilt-function-of-catalogs">
<h3>Inbuilt function of catalogs<a class="headerlink" href="#inbuilt-function-of-catalogs" title="Permalink to this headline">¶</a></h3>
<p>The catalog objects has some inbuilt functionality to facilitate the
matching. <code class="docutils literal notranslate"><span class="pre">ids2inds</span></code> returns the indicies of objects given an id list.
Other functions are related to footprint computations, see
footprint.ipynb for information on those.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">inds</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">ids2inds</span><span class="p">([</span><span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="n">inds</span><span class="p">])</span>
</pre></div>
</div>
<b>cluster</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140304178262224" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>100000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><b>cluster</b><br>Radius unit: None<br><i>ClData length=2</i>
<table id="table140301342774368" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c2</td><td>100000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c1</td><td>10000000000000.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div>
</div>
<div class="section" id="properties-of-clcatalog">
<h2>Properties of <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code><a class="headerlink" href="#properties-of-clcatalog" title="Permalink to this headline">¶</a></h2>
<p>As shown above, <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> can have any column in its main data
table, however there are a few key columns these catalogs must have to
be used for matching:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - necessary in membership matching and must correspond to
<code class="docutils literal notranslate"><span class="pre">id_cluster</span></code> in the cluster member catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ra</span></code> (in degrees) - necessary for proxity matching.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec</span></code> (in degrees) - necessary for proxity matching.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z</span></code> - necessary for proxity matching if used as matching criteria
(or for angular to physical convertion).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mass</span></code> (or mass proxy) - necessary for proxity matching if
<code class="docutils literal notranslate"><span class="pre">shared_member_fraction</span></code> used as preference criteria for unique
matches (default use in membership matching).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">radius</span></code> - necessary for proxity matching if used as a criteria of
matching (also requires <code class="docutils literal notranslate"><span class="pre">radius_unit</span></code> to be passed)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">radius_unit</span></code> can be in angular units (<code class="docutils literal notranslate"><span class="pre">radians</span></code>, <code class="docutils literal notranslate"><span class="pre">degrees</span></code>,
<code class="docutils literal notranslate"><span class="pre">arcmin</span></code>, <code class="docutils literal notranslate"><span class="pre">arcsec</span></code>) or physical units (<code class="docutils literal notranslate"><span class="pre">Mpc</span></code>, <code class="docutils literal notranslate"><span class="pre">kpc</span></code>, <code class="docutils literal notranslate"><span class="pre">pc</span></code>) or
can enven be given by mass overdensity units (<code class="docutils literal notranslate"><span class="pre">m200b</span></code>, <code class="docutils literal notranslate"><span class="pre">m500c</span></code>) and
are case insensitive. In the proximity matching the radius is converted
to angular distances (degrees):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">clevar.match</span> <span class="kn">import</span> <span class="n">ProximityMatch</span>
<span class="kn">from</span> <span class="nn">clevar.cosmology</span> <span class="kn">import</span> <span class="n">AstroPyCosmology</span>
<span class="n">mt</span> <span class="o">=</span> <span class="n">ProximityMatch</span><span class="p">()</span>
<span class="n">cosmo</span> <span class="o">=</span> <span class="n">AstroPyCosmology</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;radians&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">mt_input</span><span class="p">[</span><span class="s1">&#39;ang&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
</pre></div>
</div>
&lt;Column name=&apos;ang&apos; dtype=&apos;float64&apos; length=2&gt;
<table>
<tr><td>0.5729577951308232</td></tr>
<tr><td>1.1459155902616465</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;degrees&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">mt_input</span><span class="p">[</span><span class="s1">&#39;ang&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
</pre></div>
</div>
&lt;Column name=&apos;ang&apos; dtype=&apos;float64&apos; length=2&gt;
<table>
<tr><td>0.01</td></tr>
<tr><td>0.02</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">4</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;mpc&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">mt_input</span><span class="p">[</span><span class="s1">&#39;ang&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
</pre></div>
</div>
&lt;Column name=&apos;ang&apos; dtype=&apos;float64&apos; length=2&gt;
<table>
<tr><td>0.05169945411341919</td></tr>
<tr><td>0.06825890628285289</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">4</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;m200c&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">mt_input</span><span class="p">[</span><span class="s1">&#39;ang&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
    <span class="o">*</span> <span class="n">Converting</span> <span class="n">mass</span> <span class="p">(</span><span class="n">m200c</span><span class="p">)</span> <span class="o">-&gt;</span><span class="n">radius</span>
</pre></div>
</div>
&lt;Column name=&apos;ang&apos; dtype=&apos;float64&apos; length=2&gt;
<table>
<tr><td>0.01996895400735947</td></tr>
<tr><td>0.036417730336072186</td></tr>
</table></div>
<div class="section" id="properties-of-memcatalog">
<h2>Properties of <code class="docutils literal notranslate"><span class="pre">MemCatalog</span></code><a class="headerlink" href="#properties-of-memcatalog" title="Permalink to this headline">¶</a></h2>
<p>As shown above, <code class="docutils literal notranslate"><span class="pre">MemCatalog</span></code> can have any column in its main data
table, however there are a few key columns these catalogs must have to
be used for matching:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - necessary in membership matching of members.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_cluster</span></code> - always necessary and must correspond to <code class="docutils literal notranslate"><span class="pre">id</span></code> in
the main cluster catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ra</span></code> (in degrees) - necessary for proxity matching of members.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec</span></code> (in degrees) - necessary for proxity matching of members.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmem</span></code> - Probability of the galaxy being a member, must be [0, 1].
If not provided, it will assing 1 for all members.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">MemCatalog</span></code> object also has a <code class="docutils literal notranslate"><span class="pre">id_dict_list</span></code> atribute when
there is repeated member <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, LSST DESC ClEvaR Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
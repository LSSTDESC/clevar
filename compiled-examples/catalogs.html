

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Galaxy Cluster Catalogs &mdash; ClEvaR 0.12.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matching catalogs based on proximity (simple)" href="proximity_matching.html" />
    <link rel="prev" title="Citing ClEvaR" href="../source/citing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ClEvaR
          

          
          </a>

          
            
            
              <div class="version">
                0.12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source/overview.html">Rapid overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/citing.html">Citing ClEvaR</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage Demos</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Galaxy Cluster Catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="proximity_matching.html">Matching catalogs based on proximity (simple)</a></li>
<li class="toctree-l1"><a class="reference internal" href="proximity_matching_detailed.html">Matching catalogs based on proximity (detailed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="membership_matching.html">Matching catalogs based on membership (simple)</a></li>
<li class="toctree-l1"><a class="reference internal" href="membership_matching_detailed.html">Matching catalogs based on membership (detailed)</a></li>
<li class="toctree-l1"><a class="reference internal" href="match_metrics.html">Metrics of matching (simple)</a></li>
<li class="toctree-l1"><a class="reference internal" href="match_metrics_advanced.html">Metrics of matching (advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="footprint.html">Footprint functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="intrinsic_completeness.html">Intrinsic Completeness</a></li>
<li class="toctree-l1"><a class="reference internal" href="intrinsic_completeness.html#appendix-estimating-deviation-in-completeness-approximation">Appendix: Estimating deviation in completeness approximation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.catalog.html">clevar.catalog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.constants.html">clevar.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.cosmology.html">clevar.cosmology package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.cosmology.astropy.html">clevar.cosmology.astropy module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.cosmology.ccl.html">clevar.cosmology.ccl module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.cosmology.parent_class.html">clevar.cosmology.parent_class module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.footprint.html">clevar.footprint package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.footprint.artificial.html">clevar.footprint.artificial module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.footprint.footprint.html">clevar.footprint.footprint module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.footprint.nfw_funcs.html">clevar.footprint.nfw_funcs module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.geometry.html">clevar.geometry module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.match.html">clevar.match package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match.membership.html">clevar.match.membership module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match.parent.html">clevar.match.parent module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match.proximity.html">clevar.match.proximity module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.match_metrics.html">clevar.match_metrics package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.distances.html">clevar.match_metrics.distances package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.distances.catalog_funcs.html">clevar.match_metrics.distances.catalog_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.distances.funcs.html">clevar.match_metrics.distances.funcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.recovery.html">clevar.match_metrics.recovery package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.recovery.array_funcs.html">clevar.match_metrics.recovery.array_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.recovery.catalog_funcs.html">clevar.match_metrics.recovery.catalog_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.recovery.funcs.html">clevar.match_metrics.recovery.funcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.scaling.html">clevar.match_metrics.scaling package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.scaling.array_funcs.html">clevar.match_metrics.scaling.array_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.scaling.catalog_funcs.html">clevar.match_metrics.scaling.catalog_funcs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/clevar.match_metrics.scaling.funcs.html">clevar.match_metrics.scaling.funcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.match_metrics.plot_helper.html">clevar.match_metrics.plot_helper module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.utils.html">clevar.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/clevar.clv_yaml.html">clevar.clv_yaml package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.footprint.html">clevar.clv_yaml.footprint module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.helper_funcs.html">clevar.clv_yaml.helper_funcs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.match.html">clevar.clv_yaml.match module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.match_metrics_distances.html">clevar.clv_yaml.match_metrics_distances module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.match_metrics_mass.html">clevar.clv_yaml.match_metrics_mass module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.match_metrics_recovery_rate.html">clevar.clv_yaml.match_metrics_recovery_rate module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/clevar.clv_yaml.match_metrics_redshift.html">clevar.clv_yaml.match_metrics_redshift module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ClEvaR</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Galaxy Cluster Catalogs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/compiled-examples/catalogs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="galaxy-cluster-catalogs">
<h1>Galaxy Cluster Catalogs<a class="headerlink" href="#galaxy-cluster-catalogs" title="Permalink to this headline">¶</a></h1>
<p>The main object for galaxy cluster catalogs is <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code>, it has
same properties of <code class="docutils literal notranslate"><span class="pre">astropy</span></code> tables, with additional functionality.</p>
<h1><p>Table of Contents</p>
</h1><div class="toc docutils container">
<ul class="toc-item"><li><p>1  ClCatalog attributes</p>
</li><li><p>2  Creating a catalog</p>
<ul class="toc-item"><li><p>2.1  From columns</p>
</li><li><p>2.2  From data table</p>
</li><li><p>2.3  Create a catalog from fits files</p>
</li></ul></li><li><p>3  ClCatalog necessary columns</p>
<ul class="toc-item"><li><p>3.1  Important inputs of ClCatalog</p>
</li><li><p>3.2  Reserved keyword arguments</p>
</li><li><p>3.3  Catalog lables</p>
</li><li><p>3.4  Catalog mt_input</p>
</li></ul></li><li><p>4  Saving catalogs</p>
</li><li><p>5  Accessing catalog data</p>
</li><li><p>6  Inbuilt function of catalogs</p>
</li><li><p>7  Adding members to cluster catalogs</p>
<ul class="toc-item"><li><p>7.1  Read members from fits files</p>
</li><li><p>7.2  Important inputs of members catalog</p>
</li><li><p>7.3  Reserved keyword arguments</p>
</li><li><p>7.4  Saving members</p>
</li><li><p>7.5  Memory consuption</p>
</li></ul></li></ul></div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
</pre></div>
</div>
<section id="clcatalog-attributes">
<h2>ClCatalog attributes<a class="headerlink" href="#clcatalog-attributes" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> has the following internal attributes: - <code class="docutils literal notranslate"><span class="pre">name</span></code>:
ClCatalog name - <code class="docutils literal notranslate"><span class="pre">data</span></code>: Table with main catalog data (ex: id, ra,
dec, z) and matching data (mt_self, mt_other, mt_cross, mt_multi_self,
mt_multi_other) - <code class="docutils literal notranslate"><span class="pre">tags</span></code>: Dictionary that tells which are the default
columns to be used - <code class="docutils literal notranslate"><span class="pre">mt_input</span></code>: Table containing the necessary inputs
for the match (added by Match objects) - <code class="docutils literal notranslate"><span class="pre">size</span></code>: Number of objects in
the catalog - <code class="docutils literal notranslate"><span class="pre">id_dict</span></code>: Dictionary of indicies given the object id -
<code class="docutils literal notranslate"><span class="pre">labels</span></code>: Labels of data columns for plots - <code class="docutils literal notranslate"><span class="pre">members</span></code>: Members of
clusters (optional) - <code class="docutils literal notranslate"><span class="pre">leftover_members</span></code>: Galaxies in the input
members not hosted by the cluster catalog (optional)</p>
</section>
<section id="creating-a-catalog">
<h2>Creating a catalog<a class="headerlink" href="#creating-a-catalog" title="Permalink to this headline">¶</a></h2>
<p>The catalog can be created by passing individual columns or a whole data
table. Below we show how each case can be used.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">clevar</span> <span class="kn">import</span> <span class="n">ClCatalog</span>
</pre></div>
</div>
<section id="from-columns">
<h3>From columns<a class="headerlink" href="#from-columns" title="Permalink to this headline">¶</a></h3>
<p>To create a catalog fom columns, you have to pass the name as the
initial argument and the data columns for the table as keyword
arguments:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607704217344" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>You can also pass a <code class="docutils literal notranslate"><span class="pre">tags</span></code> dictionary as input if you want your
catalog to have names that are not default for <code class="docutils literal notranslate"><span class="pre">ClEvaR</span></code> use:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">ID_CLUSTER</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">M200</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;M200&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607704217920" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>Almost all keyword arguments will become columns of the catalog (see
exeptions in <cite>Important inputs of ``ClCatalog`</cite> &lt;#clcat_input&gt;`__):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;test name&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">test_column</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                <span class="n">other</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="n">third</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">[]])</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>test name</b><br></b><b>tags:</b> id(id)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140610861223600" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>test_column</th><th>other</th><th>third</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>int64</th><th>bool</th><th>object</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1</td><td>True</td><td>None</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>2</td><td>False</td><td>[]</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div></section>
<section id="from-data-table">
<h3>From data table<a class="headerlink" href="#from-data-table" title="Permalink to this headline">¶</a></h3>
<p>You can also create a <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> passing directly a full data table:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="n">ap_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">])</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">ap_table</span><span class="p">)</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607704219552" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>You can also pass a tags dictionary as input if you want your catalog to
have names that are not default for <code class="docutils literal notranslate"><span class="pre">ClEvaR</span></code> use:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="n">ap_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">,</span> <span class="s1">&#39;M200&#39;</span><span class="p">])</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">ap_table</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;M200&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703915008" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>You can also pass a dictionary or a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array with names:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="s1">&#39;mass&#39;</span><span class="p">:[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">]})</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703914720" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">np_table</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="mf">1e13</span><span class="p">),(</span><span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">)],</span>
                    <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;U10&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">)])</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">np_table</span><span class="p">)</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703912848" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str10</th><th>float32</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div></section>
<section id="create-a-catalog-from-fits-files">
<h3>Create a catalog from <code class="docutils literal notranslate"><span class="pre">fits</span></code> files<a class="headerlink" href="#create-a-catalog-from-fits-files" title="Permalink to this headline">¶</a></h3>
<p>The catalogs objects can also be read directly from file, by passing the
fits file as the first argument, the catalog name as the second, and the
<code class="docutils literal notranslate"><span class="pre">tag</span></code> argument listing the main columns to be read:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;../demo/cat1.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;my cluster&#39;</span><span class="p">,</span>
                     <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;MASS&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>my cluster</b><br></b><b>tags:</b> ID(id), MASS(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=5</i>
<table id="table140607704217104" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>MASS (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str3</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>CL0</td><td>3.16e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL1</td><td>2.51e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL2</td><td>2.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL3</td><td>6.31e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL4</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>If you want to read all columns in the <code class="docutils literal notranslate"><span class="pre">.fits</span></code> file, set the argument
<code class="docutils literal notranslate"><span class="pre">full=True</span></code>.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;../demo/cat1.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;my cluster&#39;</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;MASS&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>my cluster</b><br></b><b>tags:</b> ID(id), MASS(mass), RA(ra), DEC(dec), Z(z)<br><b>Radius unit:</b> None<br><div><i>ClData length=5</i>
<table id="table140607703915632" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>RA (ra)</th><th>DEC (dec)</th><th>Z (z)</th><th>MASS (mass)</th><th>RADIUS_ARCMIN</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str3</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>CL0</td><td>0.0</td><td>0.0</td><td>0.2</td><td>3.16e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL1</td><td>0.0001</td><td>0.0</td><td>0.3</td><td>2.51e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL2</td><td>0.00011</td><td>0.0</td><td>0.25</td><td>2.00e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL3</td><td>25.0</td><td>0.0</td><td>0.4</td><td>6.31e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL4</td><td>20.0</td><td>0.0</td><td>0.35</td><td>1.00e+14</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div></section>
</section>
<section id="clcatalog-necessary-columns">
<h2>ClCatalog necessary columns<a class="headerlink" href="#clcatalog-necessary-columns" title="Permalink to this headline">¶</a></h2>
<p>There are a few columns that will aways be present on <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code>
objects, and are added when not provided. For instance, the matching
columns (with prefix <code class="docutils literal notranslate"><span class="pre">mt_</span></code>):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140610861172144" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>All catalogs have an <code class="docutils literal notranslate"><span class="pre">id</span></code> column. If it is not included in the input,
one will be created:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aguena</span><span class="o">/.</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">clevar</span><span class="o">-</span><span class="mf">0.12</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py3</span><span class="o">.</span><span class="mf">9.</span><span class="n">egg</span><span class="o">/</span><span class="n">clevar</span><span class="o">/</span><span class="n">catalog</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">265</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="nb">id</span> <span class="n">column</span> <span class="n">missing</span><span class="p">,</span> <span class="n">additional</span> <span class="n">one</span> <span class="ow">is</span> <span class="n">being</span> <span class="n">created</span><span class="o">.</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703914048" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str1</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>0</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>1</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><p>Each cluster must have an unique <code class="docutils literal notranslate"><span class="pre">id</span></code>. Repetitions will have an suffix
<code class="docutils literal notranslate"><span class="pre">_r#</span></code> added:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="s1">&#39;cluster&#39;</span><span class="p">])</span>
<span class="n">cat</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aguena</span><span class="o">/.</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">clevar</span><span class="o">-</span><span class="mf">0.12</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py3</span><span class="o">.</span><span class="mf">9.</span><span class="n">egg</span><span class="o">/</span><span class="n">clevar</span><span class="o">/</span><span class="n">catalog</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">466</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Repeated</span> <span class="n">ID</span><span class="s1">&#39;s in id column, adding suffix _r# to them.</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703696240" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>object</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>cluster_r1</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>cluster_r2</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><section id="important-inputs-of-clcatalog">
<h3>Important inputs of <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code><a class="headerlink" href="#important-inputs-of-clcatalog" title="Permalink to this headline">¶</a></h3>
<p>As shown above, <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> can have any column in its main data
table. There are a few key columns that must exist (or be tagged) to be
used for matching:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - necessary in membership matching (must correspond to
<code class="docutils literal notranslate"><span class="pre">id_cluster</span></code> in the cluster member catalog).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ra</span></code> (in degrees) - necessary for proxity matching.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec</span></code> (in degrees) - necessary for proxity matching.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z</span></code> - necessary for proxity matching if used as matching criteria
(or for angular to physical convertion).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mass</span></code> (or mass proxy) - necessary for proxity matching if
<code class="docutils literal notranslate"><span class="pre">shared_member_fraction</span></code> used as preference criteria for unique
matches (default use in membership matching).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">radius</span></code> - necessary for proxity matching if used as a criteria of
matching (also requires <code class="docutils literal notranslate"><span class="pre">radius_unit</span></code> to be passed)</p></li>
</ul>
</section>
<section id="reserved-keyword-arguments">
<h3>Reserved keyword arguments<a class="headerlink" href="#reserved-keyword-arguments" title="Permalink to this headline">¶</a></h3>
<p>There is some keyword arguments that have a fixed meaning and do not
become columns in the cluster data table:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">radius_unit</span></code>: can be in angular units (<code class="docutils literal notranslate"><span class="pre">radians</span></code>, <code class="docutils literal notranslate"><span class="pre">degrees</span></code>,
<code class="docutils literal notranslate"><span class="pre">arcmin</span></code>, <code class="docutils literal notranslate"><span class="pre">arcsec</span></code>) or physical units (<code class="docutils literal notranslate"><span class="pre">Mpc</span></code>, <code class="docutils literal notranslate"><span class="pre">kpc</span></code>, <code class="docutils literal notranslate"><span class="pre">pc</span></code>)
or can enven be given by mass overdensity units (<code class="docutils literal notranslate"><span class="pre">m200b</span></code>,
<code class="docutils literal notranslate"><span class="pre">m500c</span></code>) and are case insensitive. In the proximity matching the
radius is converted to angular distances (degrees).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Data table to be added to the catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: Dictionary that tags the important columns in the catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labels</span></code>: Dictionary with labels of data columns to be used in
plots.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">members</span></code>: Members of clusters, see <a class="reference external" href="#memcat">cluster members</a>
section for details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">members_warning</span></code>: Warn if the members catalog contains galaxies
not hosted by the cluster catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mt_input</span></code>: Table containing the necessary inputs for the match.
This attribute is usually added during the matching process, but it
can be passed in the <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> construction.</p></li>
</ul>
</section>
<section id="catalog-lables">
<h3>Catalog lables<a class="headerlink" href="#catalog-lables" title="Permalink to this headline">¶</a></h3>
<p>The catalogs have a <code class="docutils literal notranslate"><span class="pre">label</span></code> attribute that is used for plots. If it is
not provided as argument, a default value is assigned:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="o">.</span><span class="n">labels</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;id_</span><span class="si">{cluster}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="s1">&#39;mass_</span><span class="si">{cluster}</span><span class="s1">&#39;</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;cluster ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;cluster M_200&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="o">.</span><span class="n">labels</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;cluster ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="s1">&#39;cluster M_200&#39;</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="catalog-mt-input">
<h3>Catalog mt_input<a class="headerlink" href="#catalog-mt-input" title="Permalink to this headline">¶</a></h3>
<p>Here are some examples of information being added to <code class="docutils literal notranslate"><span class="pre">mt_input</span></code> after
the catalog creation. In the proximity matching, it will add an angular
distance and min/max redshift when <code class="docutils literal notranslate"><span class="pre">delta_z</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">clevar.match</span> <span class="kn">import</span> <span class="n">ProximityMatch</span>
<span class="n">mt</span> <span class="o">=</span> <span class="n">ProximityMatch</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span>  <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;radians&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">mt_input</span><span class="p">[</span><span class="s1">&#39;ang&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
</pre></div>
</div>
&lt;Column name=&apos;ang&apos; dtype=&apos;float64&apos; length=2&gt;
<table>
<tr><td>0.5729577951308232</td></tr>
<tr><td>1.1459155902616465</td></tr>
</table><p>This information is also show directly when displaing the catalog:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span>  <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;degrees&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">cat</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
</pre></div>
</div>
<b>Cat</b><br></b><b>tags:</b> id(id), radius(radius)<br><b>Radius unit:</b> degrees<br><div><i>ClData length=2</i>
<table id="table140607703696720" class="table-striped table-bordered table-condensed">
<thead><tr><th colspan=6></th><th colspan=3 style='text-align:left; background-color:grey; color:white'>mt_input</th></tr></thread><thead><tr><th>id</th><th>radius</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th><th>zmin</th><th>zmax</th><th>ang</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th><th>float64</th><th>float64</th><th>float64</th></tr></thead>
<tr><td>c1</td><td>0.01</td><td>None</td><td>None</td><td>[]</td><td>[]</td><td>-1.0</td><td>10.0</td><td>0.01</td></tr>
<tr><td>c2</td><td>0.02</td><td>None</td><td>None</td><td>[]</td><td>[]</td><td>-1.0</td><td>10.0</td><td>0.02</td></tr>
</table></div><p>Using physical units (requires a cosmology):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">clevar.cosmology</span> <span class="kn">import</span> <span class="n">AstroPyCosmology</span>
<span class="n">cosmo</span> <span class="o">=</span> <span class="n">AstroPyCosmology</span><span class="p">()</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Radius in Mpc&lt;/h3&gt;&#39;</span><span class="p">))</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span>  <span class="n">radius</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">4</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">],</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;mpc&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Radius from M200c&lt;/h3&gt;&#39;</span><span class="p">))</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;Cat&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span> <span class="n">z</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">4</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">],</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;radius&#39;</span><span class="p">:</span><span class="s1">&#39;mass&#39;</span><span class="p">},</span> <span class="n">radius_unit</span><span class="o">=</span><span class="s1">&#39;m200c&#39;</span><span class="p">)</span>
<span class="n">mt</span><span class="o">.</span><span class="n">prep_cat_for_match</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="n">delta_z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">match_radius</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">)</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
</pre></div>
</div>
<h3>Radius in Mpc</h3><div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
</pre></div>
</div>
<b>Cat</b><br></b><b>tags:</b> id(id), radius(radius), z(z)<br><b>Radius unit:</b> mpc<br><div><i>ClData length=2</i>
<table id="table140607703698112" class="table-striped table-bordered table-condensed">
<thead><tr><th colspan=7></th><th colspan=3 style='text-align:left; background-color:grey; color:white'>mt_input</th></tr></thread><thead><tr><th>id</th><th>radius</th><th>z</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th><th>zmin</th><th>zmax</th><th>ang</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th><th>float64</th><th>float64</th><th>float64</th></tr></thead>
<tr><td>c1</td><td>1.0</td><td>0.4</td><td>None</td><td>None</td><td>[]</td><td>[]</td><td>-1.0</td><td>10.0</td><td>0.05169945411341919</td></tr>
<tr><td>c2</td><td>1.5</td><td>0.5</td><td>None</td><td>None</td><td>[]</td><td>[]</td><td>-1.0</td><td>10.0</td><td>0.06825890628285289</td></tr>
</table></div><h3>Radius from M200c</h3><div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prep mt_cols</span>
<span class="o">*</span> <span class="n">zmin</span><span class="o">|</span><span class="n">zmax</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">10</span>
<span class="o">*</span> <span class="n">ang</span> <span class="n">radius</span> <span class="kn">from</span> <span class="nn">cat</span>
    <span class="o">*</span> <span class="n">Converting</span> <span class="n">mass</span> <span class="p">(</span><span class="n">m200c</span><span class="p">)</span> <span class="o">-&gt;</span><span class="n">radius</span>
</pre></div>
</div>
<b>Cat</b><br></b><b>tags:</b> id(id), mass(radius), mass(mass), z(z)<br><b>Radius unit:</b> m200c<br><div><i>ClData length=2</i>
<table id="table140607703914240" class="table-striped table-bordered table-condensed">
<thead><tr><th colspan=7></th><th colspan=3 style='text-align:left; background-color:grey; color:white'>mt_input</th></tr></thread><thead><tr><th>id</th><th>mass (radius)</th><th>z</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th><th>zmin</th><th>zmax</th><th>ang</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th><th>float64</th><th>float64</th><th>float64</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>0.4</td><td>None</td><td>None</td><td>[]</td><td>[]</td><td>-1.0</td><td>10.0</td><td>0.01996895400735947</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>0.5</td><td>None</td><td>None</td><td>[]</td><td>[]</td><td>-1.0</td><td>10.0</td><td>0.036417730336072186</td></tr>
</table></div></section>
</section>
<section id="saving-catalogs">
<h2>Saving catalogs<a class="headerlink" href="#saving-catalogs" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> object has a <code class="docutils literal notranslate"><span class="pre">write</span></code> inbuilt function to save them
to <code class="docutils literal notranslate"><span class="pre">.fits</span></code> files. This function also take the argument <code class="docutils literal notranslate"><span class="pre">add_header</span></code>
that add the name and labels informations to those files. If the file
was saved with this argument, it can be read without the requirement of
a <code class="docutils literal notranslate"><span class="pre">name</span></code> argument:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">ID_CLUSTER</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">M200</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;M200&#39;</span><span class="p">},</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;cluster ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;cluster M_200&#39;</span><span class="p">},</span>
               <span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;cat1_with_info.fits&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat_temp</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">read_full</span><span class="p">(</span><span class="s1">&#39;cat1_with_info.fits&#39;</span><span class="p">)</span>
<span class="n">cat_temp</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat_temp</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703767648" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div></section>
<section id="accessing-catalog-data">
<h2>Accessing catalog data<a class="headerlink" href="#accessing-catalog-data" title="Permalink to this headline">¶</a></h2>
<p>The main data table of the catalog can be accessed with <code class="docutils literal notranslate"><span class="pre">[]</span></code>
operations in the same way as <code class="docutils literal notranslate"><span class="pre">astropy</span></code> tables. The output is a new
<code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> object, exept when only 1 row or column is required, then
the row/column is returned:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="n">ID_CLUSTER</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">M200</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">],</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;M200&#39;</span><span class="p">},</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;cluster ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;cluster M_200&#39;</span><span class="p">},</span>
               <span class="p">)</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">]</span>
</pre></div>
</div>
&lt;Column name=&apos;ID_CLUSTER&apos; dtype=&apos;str2&apos; length=2&gt;
<table>
<tr><td>c1</td></tr>
<tr><td>c2</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">,</span> <span class="s1">&#39;M200&#39;</span><span class="p">]</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703697488" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703765200" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]]</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=1</i>
<table id="table140607703765632" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=1</i>
<table id="table140607703697440" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<i>Row index=0</i>
<table id="table140607703696096">
<thead><tr><th>ID_CLUSTER</th><th>M200</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table><p>An important detail is that when the catalog has tags, passing a string
that is tagged will return the tagged column:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</pre></div>
</div>
&lt;Column name=&apos;ID_CLUSTER&apos; dtype=&apos;str2&apos; length=2&gt;
<table>
<tr><td>c1</td></tr>
<tr><td>c2</td></tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="s1">&#39;id_cluster&#39;</span><span class="p">,</span> <span class="s1">&#39;M200&#39;</span><span class="p">]</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> ID_CLUSTER(id), M200(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703767840" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID_CLUSTER (id)</th><th>M200 (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div></section>
<section id="inbuilt-function-of-catalogs">
<h2>Inbuilt function of catalogs<a class="headerlink" href="#inbuilt-function-of-catalogs" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code> object has some inbuilt functionality to facilitate
the matching. <code class="docutils literal notranslate"><span class="pre">ids2inds</span></code> returns the indicies of objects given an id
list. Other functions are related to footprint computations, see
footprint.ipynb for information on those.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Catalog&lt;/h3&gt;&#39;</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Catalog sorted by id list&lt;/h3&gt;&#39;</span><span class="p">))</span>
<span class="n">inds</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">ids2inds</span><span class="p">([</span><span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="n">inds</span><span class="p">])</span>
</pre></div>
</div>
<h3>Catalog</h3><b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703696816" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><h3>Catalog sorted by id list</h3><b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703765152" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div></section>
<section id="adding-members-to-cluster-catalogs">
<h2>Adding members to cluster catalogs<a class="headerlink" href="#adding-members-to-cluster-catalogs" title="Permalink to this headline">¶</a></h2>
<p>The members are used as an internal table like object of <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code>,
accessed by <code class="docutils literal notranslate"><span class="pre">.members</span></code>. This object have the following attributes: -
<code class="docutils literal notranslate"><span class="pre">name</span></code>: ClCatalog name - <code class="docutils literal notranslate"><span class="pre">data</span></code>: Table with main catalog data (ex:
id, id_cluster, ra, dec, z) - <code class="docutils literal notranslate"><span class="pre">size</span></code>: Number of objects in the catalog
- <code class="docutils literal notranslate"><span class="pre">id_dict</span></code>: Dictionary of indicies given the object id - <code class="docutils literal notranslate"><span class="pre">labels</span></code>:
Labels of data columns for plots - <code class="docutils literal notranslate"><span class="pre">id_dict_list</span></code>: Dictionary of
indicies given the object id, retiruning lists to account members with
repeated <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
<p>The members can be added to the cluster object using the <code class="docutils literal notranslate"><span class="pre">add_members</span></code>
function. It has a similar instanciating format of a <code class="docutils literal notranslate"><span class="pre">ClCatalog</span></code>
object, where the columns are added by keyword arguments (the key
<code class="docutils literal notranslate"><span class="pre">id_cluster</span></code> is always necessary and must correspond to <code class="docutils literal notranslate"><span class="pre">id</span></code> in the
main cluster catalog):</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span><span class="o">.</span><span class="n">add_members</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;m1&#39;</span><span class="p">,</span> <span class="s1">&#39;m2&#39;</span><span class="p">,</span> <span class="s1">&#39;m3&#39;</span><span class="p">],</span> <span class="n">id_cluster</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703915680" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><b>members</b><br><b>tags:</b> id(id), id_cluster(id_cluster)<br><div><i>ClData length=3</i>
<table id="table140607703912560" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>id_cluster</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str2</th><th>str2</th><th>int64</th></tr></thead>
<tr><td>m1</td><td>c1</td><td>0</td></tr>
<tr><td>m2</td><td>c2</td><td>1</td></tr>
<tr><td>m3</td><td>c1</td><td>0</td></tr>
</table></div><p>The same can be done using <code class="docutils literal notranslate"><span class="pre">tags</span></code>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">,</span> <span class="mf">1e14</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span><span class="o">.</span><span class="n">add_members</span><span class="p">(</span>
    <span class="n">ID</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;m1&#39;</span><span class="p">,</span> <span class="s1">&#39;m2&#39;</span><span class="p">,</span> <span class="s1">&#39;m3&#39;</span><span class="p">],</span> <span class="n">IDCL</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">],</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;id_cluster&#39;</span><span class="p">:</span><span class="s1">&#39;IDCL&#39;</span><span class="p">})</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=2</i>
<table id="table140607703916304" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>c2</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><b>members</b><br><b>tags:</b> ID(id), IDCL(id_cluster)<br><div><i>ClData length=3</i>
<table id="table140607703912560" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>IDCL (id_cluster)</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str2</th><th>str2</th><th>int64</th></tr></thead>
<tr><td>m1</td><td>c1</td><td>0</td></tr>
<tr><td>m2</td><td>c2</td><td>1</td></tr>
<tr><td>m3</td><td>c1</td><td>0</td></tr>
</table></div><section id="read-members-from-fits-files">
<h3>Read members from <code class="docutils literal notranslate"><span class="pre">fits</span></code> files<a class="headerlink" href="#read-members-from-fits-files" title="Permalink to this headline">¶</a></h3>
<p>The catalogs objects can also be read directly from file, by passing the
fits file as the first argument, the catalog name as the second, and the
names of the columns in the fits files as keyword arguments:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>
    <span class="s1">&#39;../demo/cat1.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;my cluster&#39;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;MASS&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="o">.</span><span class="n">read_members</span><span class="p">(</span>
    <span class="s1">&#39;../demo/cat1_mem.fits&#39;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;id_cluster&#39;</span><span class="p">:</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">})</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
</pre></div>
</div>
<b>my cluster</b><br></b><b>tags:</b> ID(id), MASS(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=5</i>
<table id="table140607704218688" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>MASS (mass)</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str3</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>CL0</td><td>3.16e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL1</td><td>2.51e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL2</td><td>2.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL3</td><td>6.31e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL4</td><td>1.00e+14</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><b>members</b><br><b>tags:</b> ID(id), ID_CLUSTER(id_cluster)<br><div><i>ClData length=15</i>
<table id="table140607704218640" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>ID_CLUSTER (id_cluster)</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str5</th><th>bytes3</th><th>int64</th></tr></thead>
<tr><td>MEM0</td><td>CL0</td><td>0</td></tr>
<tr><td>MEM1</td><td>CL0</td><td>0</td></tr>
<tr><td>MEM2</td><td>CL0</td><td>0</td></tr>
<tr><td>MEM3</td><td>CL0</td><td>0</td></tr>
<tr><td>MEM4</td><td>CL0</td><td>0</td></tr>
<tr><td>MEM5</td><td>CL1</td><td>1</td></tr>
<tr><td>MEM6</td><td>CL1</td><td>1</td></tr>
<tr><td>MEM7</td><td>CL1</td><td>1</td></tr>
<tr><td>MEM8</td><td>CL1</td><td>1</td></tr>
<tr><td>MEM9</td><td>CL2</td><td>2</td></tr>
<tr><td>MEM10</td><td>CL2</td><td>2</td></tr>
<tr><td>MEM11</td><td>CL2</td><td>2</td></tr>
<tr><td>MEM12</td><td>CL3</td><td>3</td></tr>
<tr><td>MEM13</td><td>CL3</td><td>3</td></tr>
<tr><td>MEM14</td><td>CL4</td><td>4</td></tr>
</table></div><p>Again, passing <code class="docutils literal notranslate"><span class="pre">full=True</span></code> will read all columns in the file:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="o">.</span><span class="n">read</span><span class="p">(</span>
    <span class="s1">&#39;../demo/cat1.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;my cluster&#39;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span><span class="s1">&#39;MASS&#39;</span><span class="p">},</span> <span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cat</span><span class="o">.</span><span class="n">read_members</span><span class="p">(</span>
    <span class="s1">&#39;../demo/cat1_mem.fits&#39;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;id_cluster&#39;</span><span class="p">:</span><span class="s1">&#39;ID_CLUSTER&#39;</span><span class="p">},</span> <span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
</pre></div>
</div>
<b>my cluster</b><br></b><b>tags:</b> ID(id), MASS(mass), RA(ra), DEC(dec), Z(z)<br><b>Radius unit:</b> None<br><div><i>ClData length=5</i>
<table id="table140607704217584" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>RA (ra)</th><th>DEC (dec)</th><th>Z (z)</th><th>MASS (mass)</th><th>RADIUS_ARCMIN</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str3</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>CL0</td><td>0.0</td><td>0.0</td><td>0.2</td><td>3.16e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL1</td><td>0.0001</td><td>0.0</td><td>0.3</td><td>2.51e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL2</td><td>0.00011</td><td>0.0</td><td>0.25</td><td>2.00e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL3</td><td>25.0</td><td>0.0</td><td>0.4</td><td>6.31e+13</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
<tr><td>CL4</td><td>20.0</td><td>0.0</td><td>0.35</td><td>1.00e+14</td><td>1.0</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><b>members</b><br><b>tags:</b> ID(id), ID_CLUSTER(id_cluster), RA(ra), DEC(dec), Z(z)<br><div><i>ClData length=15</i>
<table id="table140610861172144" class="table-striped table-bordered table-condensed">
<thead><tr><th>ID (id)</th><th>ID_CLUSTER (id_cluster)</th><th>RA (ra)</th><th>DEC (dec)</th><th>Z (z)</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str5</th><th>bytes3</th><th>float64</th><th>float64</th><th>float64</th><th>int64</th></tr></thead>
<tr><td>MEM0</td><td>CL0</td><td>0.0</td><td>0.0</td><td>0.2</td><td>0</td></tr>
<tr><td>MEM1</td><td>CL0</td><td>1e-05</td><td>1e-05</td><td>0.2</td><td>0</td></tr>
<tr><td>MEM2</td><td>CL0</td><td>2e-05</td><td>2e-05</td><td>0.2</td><td>0</td></tr>
<tr><td>MEM3</td><td>CL0</td><td>3.0000000000000004e-05</td><td>3.0000000000000004e-05</td><td>0.2</td><td>0</td></tr>
<tr><td>MEM4</td><td>CL0</td><td>4e-05</td><td>4e-05</td><td>0.2</td><td>0</td></tr>
<tr><td>MEM5</td><td>CL1</td><td>0.0001</td><td>0.0</td><td>0.3</td><td>1</td></tr>
<tr><td>MEM6</td><td>CL1</td><td>0.00011</td><td>1e-05</td><td>0.3</td><td>1</td></tr>
<tr><td>MEM7</td><td>CL1</td><td>0.00012</td><td>2e-05</td><td>0.3</td><td>1</td></tr>
<tr><td>MEM8</td><td>CL1</td><td>0.00013000000000000002</td><td>3.0000000000000004e-05</td><td>0.3</td><td>1</td></tr>
<tr><td>MEM9</td><td>CL2</td><td>0.00011</td><td>0.0</td><td>0.25</td><td>2</td></tr>
<tr><td>MEM10</td><td>CL2</td><td>0.00012</td><td>1e-05</td><td>0.25</td><td>2</td></tr>
<tr><td>MEM11</td><td>CL2</td><td>0.00013000000000000002</td><td>2e-05</td><td>0.25</td><td>2</td></tr>
<tr><td>MEM12</td><td>CL3</td><td>25.0</td><td>0.0</td><td>0.4</td><td>3</td></tr>
<tr><td>MEM13</td><td>CL3</td><td>25.00001</td><td>1e-05</td><td>0.4</td><td>3</td></tr>
<tr><td>MEM14</td><td>CL4</td><td>20.0</td><td>0.0</td><td>0.35</td><td>4</td></tr>
</table></div></section>
<section id="important-inputs-of-members-catalog">
<h3>Important inputs of members catalog<a class="headerlink" href="#important-inputs-of-members-catalog" title="Permalink to this headline">¶</a></h3>
<p>There are a few key columns these catalogs must have to be used for
matching:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - necessary in membership matching of members.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_cluster</span></code> - always necessary and must correspond to <code class="docutils literal notranslate"><span class="pre">id</span></code> in
the main cluster catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ra</span></code> (in degrees) - necessary for proxity matching of members.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec</span></code> (in degrees) - necessary for proxity matching of members.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmem</span></code> - Probability of the galaxy being a member, must be [0, 1].
If not provided, it will assing 1 for all members.</p></li>
</ul>
</section>
<section id="id1">
<h3>Reserved keyword arguments<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>There are three keyword arguments with specific uses:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Data table to be added to the catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: Dictionary that tags the important columns in the catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labels</span></code>: Dictionary with labels of data columns to be used in
plots.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">members_consistency</span></code>: Require that all input members belong to
this cluster catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">members_warning</span></code>: Raise warning if members are do not belong to
this cluster catalog, and save them in leftover_members attribute.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">members_catalog</span></code>: Members catalog if avaliable, mostly for
internal use.</p></li>
</ul>
<p>When <code class="docutils literal notranslate"><span class="pre">members_consistency=True</span></code>, only galaxies hosted by the cluster
catalog is kept. If <code class="docutils literal notranslate"><span class="pre">members_warning=True</span></code>, a warning is raised and
the clusters not hosted are stored in <code class="docutils literal notranslate"><span class="pre">leftover_members</span></code>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">ClCatalog</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">],</span> <span class="n">mass</span><span class="o">=</span><span class="p">[</span><span class="mf">1e13</span><span class="p">])</span>
<span class="n">cat</span><span class="p">[</span><span class="s1">&#39;mass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;.2e&#39;</span> <span class="c1"># Format for nice display</span>
<span class="n">cat</span><span class="o">.</span><span class="n">add_members</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;m1&#39;</span><span class="p">,</span> <span class="s1">&#39;m2&#39;</span><span class="p">,</span> <span class="s1">&#39;m3&#39;</span><span class="p">],</span> <span class="n">id_cluster</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c1&#39;</span><span class="p">])</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">leftover_members</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aguena</span><span class="o">/.</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">clevar</span><span class="o">-</span><span class="mf">0.12</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py3</span><span class="o">.</span><span class="mf">9.</span><span class="n">egg</span><span class="o">/</span><span class="n">clevar</span><span class="o">/</span><span class="n">catalog</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">967</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Some</span> <span class="n">galaxies</span> <span class="n">were</span> <span class="ow">not</span> <span class="n">members</span> <span class="n">of</span> <span class="n">the</span> <span class="n">cluster</span> <span class="n">catalog</span><span class="o">.</span> <span class="n">They</span> <span class="n">are</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">leftover_members</span> <span class="n">attribute</span><span class="o">.</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</pre></div>
</div>
<b>cluster</b><br></b><b>tags:</b> id(id), mass(mass)<br><b>Radius unit:</b> None<br><div><i>ClData length=1</i>
<table id="table140607703915632" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>mass</th><th>mt_self</th><th>mt_other</th><th>mt_multi_self</th><th>mt_multi_other</th></tr></thead>
<thead><tr><th>str2</th><th>float64</th><th>object</th><th>object</th><th>object</th><th>object</th></tr></thead>
<tr><td>c1</td><td>1.00e+13</td><td>None</td><td>None</td><td>[]</td><td>[]</td></tr>
</table></div><b>members</b><br><b>tags:</b> id(id), id_cluster(id_cluster)<br><div><i>ClData length=2</i>
<table id="table140607703912560" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>id_cluster</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str2</th><th>str2</th><th>int64</th></tr></thead>
<tr><td>m1</td><td>c1</td><td>0</td></tr>
<tr><td>m3</td><td>c1</td><td>0</td></tr>
</table></div><b>leftover members</b><br><b>tags:</b> id(id), id_cluster(id_cluster)<br><div><i>ClData length=1</i>
<table id="table140610861223744" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>id_cluster</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str2</th><th>str2</th><th>int64</th></tr></thead>
<tr><td>m2</td><td>c2</td><td>-1</td></tr>
</table></div></section>
<section id="saving-members">
<h3>Saving members<a class="headerlink" href="#saving-members" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">member</span></code> object has a <code class="docutils literal notranslate"><span class="pre">write</span></code> inbuilt function to save them to
<code class="docutils literal notranslate"><span class="pre">.fits</span></code> files. This function also take the argument <code class="docutils literal notranslate"><span class="pre">add_header</span></code>
that add the name and labels informations to those files. If the file
was saved with this argument, it can be read without the requirement of
a <code class="docutils literal notranslate"><span class="pre">name</span></code> argument:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;mem1_with_info.fits&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="memory-consuption">
<h3>Memory consuption<a class="headerlink" href="#memory-consuption" title="Permalink to this headline">¶</a></h3>
<p>IMPORTANT! The member catalogs are usually hundreds of times larger than
the cluster catalogs. Therefore it is advised not to add it unless you
are using it for a specific goal (ex: membership matching). This catalog
also can lead to memory overload and makes the other functions slower.</p>
<p>There are two options to handle this, you can either pass a member free
version of the catalog or remove the members altogether. To use the
member free version of the catalog, use the <code class="docutils literal notranslate"><span class="pre">raw</span></code> function:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat_raw</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">raw</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Raw:&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">raw</span><span class="p">()</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Original</span><span class="p">:</span>
</pre></div>
</div>
<b>members</b><br><b>tags:</b> id(id), id_cluster(id_cluster)<br><div><i>ClData length=2</i>
<table id="table140607703869280" class="table-striped table-bordered table-condensed">
<thead><tr><th>id</th><th>id_cluster</th><th>ind_cl</th></tr></thead>
<thead><tr><th>str2</th><th>str2</th><th>int64</th></tr></thead>
<tr><td>m1</td><td>c1</td><td>0</td></tr>
<tr><td>m3</td><td>c1</td><td>0</td></tr>
</table></div><div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Raw</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kc">None</span>
</pre></div>
</div>
<p>To remove the members from the cluster catalog, use the
<code class="docutils literal notranslate"><span class="pre">remove_members</span></code> function:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="o">.</span><span class="n">remove_members</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">members</span><span class="p">,</span> <span class="n">cat</span><span class="o">.</span><span class="n">leftover_members</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kc">None</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, LSST DESC ClEvaR Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>